<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Enterprise IT Toolkit - Advanced Management Console</title>
    
    <!-- PWA Meta Tags -->
    <meta name="description" content="Advanced IT Management Console for Enterprise Environments">
    <meta name="theme-color" content="#1e3a8a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Enterprise IT Toolkit">
    <meta name="msapplication-TileColor" content="#1e3a8a">
    <meta name="msapplication-config" content="/browserconfig.xml">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/icon-180x180.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/icon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/icon-16x16.png">
    <link rel="shortcut icon" href="/favicon.ico">
    
    <!-- External Resources -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/chart.js" crossorigin="anonymous"></script>
    
    <!-- Local Styles -->
    <link href="css/site.css" rel="stylesheet" />
</head>
<body class="enterprise-theme">
    <!-- Top Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark enterprise-navbar">
        <div class="container-fluid">
            <a class="navbar-brand enterprise-brand" href="#">
                <i class="fas fa-shield-alt me-2"></i>
                <span class="brand-text">Enterprise IT Toolkit</span>
                <span class="brand-subtitle">Advanced Management Console</span>
            </a>
            
            <div class="navbar-nav ms-auto">
                <div class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle enterprise-nav-link" href="#" role="button" data-bs-toggle="dropdown">
                        <i class="fas fa-user-circle me-1"></i>
                        <span class="user-info">
                            <span class="user-name">Admin User</span>
                            <span class="user-role">System Administrator</span>
                        </span>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end enterprise-dropdown">
                        <li><a class="dropdown-item" href="#"><i class="fas fa-user me-2"></i>Profile</a></li>
                        <li><a class="dropdown-item" href="#"><i class="fas fa-cog me-2"></i>Settings</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="#"><i class="fas fa-sign-out-alt me-2"></i>Logout</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>

    <div class="container-fluid enterprise-container">
        <div class="row">
            <!-- Sidebar Navigation -->
            <nav class="col-md-3 col-lg-2 d-md-block enterprise-sidebar">
                <div class="sidebar-sticky">
                    <ul class="nav flex-column enterprise-nav">
                        <li class="nav-item">
                            <a class="nav-link enterprise-nav-link active" href="#" onclick="showSection('dashboard')">
                                <i class="fas fa-tachometer-alt me-2"></i>
                                <span>Dashboard</span>
                                <span class="nav-badge">Live</span>
                            </a>
                        </li>
                        
                        <li class="nav-item">
                            <a class="nav-link enterprise-nav-link" href="#" onclick="showSection('system-health')">
                                <i class="fas fa-heartbeat me-2"></i>
                                <span>System Health</span>
                                <span class="nav-status status-healthy">Healthy</span>
                            </a>
                        </li>
                        
                        <li class="nav-item">
                            <a class="nav-link enterprise-nav-link" href="#" onclick="showSection('performance')">
                                <i class="fas fa-chart-line me-2"></i>
                                <span>Performance</span>
                                <span class="nav-status status-optimal">Optimal</span>
                            </a>
                        </li>
                        
                        <li class="nav-item">
                            <a class="nav-link enterprise-nav-link" href="#" onclick="showSection('security')">
                                <i class="fas fa-shield-alt me-2"></i>
                                <span>Security</span>
                                <span class="nav-status status-secure">Secure</span>
                            </a>
                        </li>
                        
                        <li class="nav-item">
                            <a class="nav-link enterprise-nav-link" href="#" onclick="showSection('network')">
                                <i class="fas fa-network-wired me-2"></i>
                                <span>Network</span>
                                <span class="nav-status status-connected">Connected</span>
                            </a>
                        </li>
                        
                        <li class="nav-item">
                            <a class="nav-link enterprise-nav-link" href="#" onclick="showSection('automation')">
                                <i class="fas fa-robot me-2"></i>
                                <span>Automation</span>
                                <span class="nav-badge">12 Jobs</span>
                            </a>
                        </li>
                        
                        <li class="nav-item">
                            <a class="nav-link enterprise-nav-link" href="#" onclick="showSection('ml-analytics')">
                                <i class="fas fa-brain me-2"></i>
                                <span>ML Analytics</span>
                                <span class="nav-badge">AI</span>
                            </a>
                        </li>
                        
                        <li class="nav-item">
                            <a class="nav-link enterprise-nav-link" href="#" onclick="showSection('reports')">
                                <i class="fas fa-file-alt me-2"></i>
                                <span>Reports</span>
                            </a>
                        </li>
                        
                        <li class="nav-item">
                            <a class="nav-link enterprise-nav-link" href="#" onclick="showSection('settings')">
                                <i class="fas fa-cog me-2"></i>
                                <span>Settings</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- Main Content Area -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 enterprise-main">
                <!-- Dashboard Section -->
                <div id="dashboard" class="content-section active">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2 enterprise-title">
                            <i class="fas fa-tachometer-alt me-2"></i>
                            System Dashboard
                        </h1>
                        <div class="btn-toolbar mb-2 mb-md-0">
                            <div class="btn-group me-2">
                                <button type="button" class="btn btn-sm btn-outline-secondary">
                                    <i class="fas fa-download me-1"></i>Export
                                </button>
                                <button type="button" class="btn btn-sm btn-outline-secondary">
                                    <i class="fas fa-refresh me-1"></i>Refresh
                                </button>
                            </div>
                            <button type="button" class="btn btn-sm btn-primary">
                                <i class="fas fa-plus me-1"></i>New Task
                            </button>
                        </div>
                    </div>

                    <!-- Key Metrics Row -->
                    <div class="row mb-4">
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card enterprise-card border-left-primary">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                                System Health
                                            </div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800">98.5%</div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-heartbeat fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card enterprise-card border-left-success">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                                                Performance Score
                                            </div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800">94.2%</div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-chart-line fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card enterprise-card border-left-info">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-info text-uppercase mb-1">
                                                Security Status
                                            </div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800">Secure</div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-shield-alt fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card enterprise-card border-left-warning">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">
                                                Active Jobs
                                            </div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800">12</div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-tasks fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Charts Row -->
                    <div class="row">
                        <div class="col-xl-8 col-lg-7">
                            <div class="card enterprise-card mb-4">
                                <div class="card-header">
                                    <h6 class="m-0 font-weight-bold text-primary">
                                        <i class="fas fa-chart-area me-2"></i>
                                        System Performance Overview
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <div class="chart-area">
                                        <canvas id="performanceChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-xl-4 col-lg-5">
                            <div class="card enterprise-card mb-4">
                                <div class="card-header">
                                    <h6 class="m-0 font-weight-bold text-primary">
                                        <i class="fas fa-chart-pie me-2"></i>
                                        Resource Utilization
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <div class="chart-pie">
                                        <canvas id="resourceChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Activity and Alerts -->
                    <div class="row">
                        <div class="col-lg-6">
                            <div class="card enterprise-card mb-4">
                                <div class="card-header">
                                    <h6 class="m-0 font-weight-bold text-primary">
                                        <i class="fas fa-history me-2"></i>
                                        Recent Activity
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <div class="activity-list">
                                        <div class="activity-item">
                                            <div class="activity-icon bg-success">
                                                <i class="fas fa-check"></i>
                                            </div>
                                            <div class="activity-content">
                                                <div class="activity-title">System Health Check Completed</div>
                                                <div class="activity-time">2 minutes ago</div>
                                            </div>
                                        </div>
                                        <div class="activity-item">
                                            <div class="activity-icon bg-info">
                                                <i class="fas fa-robot"></i>
                                            </div>
                                            <div class="activity-content">
                                                <div class="activity-title">Automated Backup Job Started</div>
                                                <div class="activity-time">15 minutes ago</div>
                                            </div>
                                        </div>
                                        <div class="activity-item">
                                            <div class="activity-icon bg-warning">
                                                <i class="fas fa-exclamation-triangle"></i>
                                            </div>
                                            <div class="activity-content">
                                                <div class="activity-title">High CPU Usage Detected</div>
                                                <div class="activity-time">1 hour ago</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <div class="card enterprise-card mb-4">
                                <div class="card-header">
                                    <h6 class="m-0 font-weight-bold text-primary">
                                        <i class="fas fa-bell me-2"></i>
                                        System Alerts
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <div class="alert-list">
                                        <div class="alert-item alert-success">
                                            <i class="fas fa-check-circle me-2"></i>
                                            <span>All systems operational</span>
                                        </div>
                                        <div class="alert-item alert-info">
                                            <i class="fas fa-info-circle me-2"></i>
                                            <span>Scheduled maintenance in 2 hours</span>
                                        </div>
                                        <div class="alert-item alert-warning">
                                            <i class="fas fa-exclamation-triangle me-2"></i>
                                            <span>Disk space 85% full on C: drive</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ML Analytics Section -->
                <div id="ml-analytics" class="content-section">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2 enterprise-title">
                            <i class="fas fa-brain me-2"></i>
                            Machine Learning Analytics
                        </h1>
                        <div class="btn-toolbar mb-2 mb-md-0">
                            <div class="btn-group me-2">
                                <button type="button" class="btn btn-sm btn-outline-secondary">
                                    <i class="fas fa-download me-1"></i>Export Insights
                                </button>
                                <button type="button" class="btn btn-sm btn-outline-secondary">
                                    <i class="fas fa-refresh me-1"></i>Refresh Models
                                </button>
                            </div>
                            <button type="button" class="btn btn-sm btn-primary">
                                <i class="fas fa-plus me-1"></i>New Prediction
                            </button>
                        </div>
                    </div>

                    <!-- ML Metrics Row -->
                    <div class="row mb-4">
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card enterprise-card border-left-primary">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                                Model Accuracy
                                            </div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800">94.2%</div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-brain fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card enterprise-card border-left-success">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                                                Predictions Today
                                            </div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800">1,247</div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-crystal-ball fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card enterprise-card border-left-info">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-info text-uppercase mb-1">
                                                Anomalies Detected
                                            </div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800">23</div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-exclamation-triangle fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card enterprise-card border-left-warning">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">
                                                Active Models
                                            </div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800">8</div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-cogs fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ML Charts and Insights -->
                    <div class="row">
                        <div class="col-xl-8 col-lg-7">
                            <div class="card enterprise-card mb-4">
                                <div class="card-header">
                                    <h6 class="m-0 font-weight-bold text-primary">
                                        <i class="fas fa-chart-line me-2"></i>
                                        Prediction Trends
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <div class="chart-area">
                                        <canvas id="predictionChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-xl-4 col-lg-5">
                            <div class="card enterprise-card mb-4">
                                <div class="card-header">
                                    <h6 class="m-0 font-weight-bold text-primary">
                                        <i class="fas fa-lightbulb me-2"></i>
                                        AI Insights
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <div class="insights-list">
                                        <div class="insight-item">
                                            <div class="insight-icon bg-primary">
                                                <i class="fas fa-trending-up"></i>
                                            </div>
                                            <div class="insight-content">
                                                <div class="insight-title">Performance Optimization</div>
                                                <div class="insight-desc">CPU usage predicted to increase 15% in next 24 hours</div>
                                            </div>
                                        </div>
                                        <div class="insight-item">
                                            <div class="insight-icon bg-warning">
                                                <i class="fas fa-exclamation-triangle"></i>
                                            </div>
                                            <div class="insight-content">
                                                <div class="insight-title">Capacity Alert</div>
                                                <div class="insight-desc">Disk space will reach 90% in 3 days</div>
                                            </div>
                                        </div>
                                        <div class="insight-item">
                                            <div class="insight-icon bg-success">
                                                <i class="fas fa-shield-alt"></i>
                                            </div>
                                            <div class="insight-content">
                                                <div class="insight-title">Security Status</div>
                                                <div class="insight-desc">No threats predicted in next 7 days</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Other sections would go here... -->
                <div id="system-health" class="content-section">
                    <h1 class="h2 enterprise-title">System Health</h1>
                    <p>System health monitoring and diagnostics...</p>
                </div>

                <div id="performance" class="content-section">
                    <h1 class="h2 enterprise-title">Performance Analytics</h1>
                    <p>Performance monitoring and optimization...</p>
                </div>

                <div id="security" class="content-section">
                    <h1 class="h2 enterprise-title">Security Center</h1>
                    <p>Security monitoring and threat detection...</p>
                </div>

                <div id="network" class="content-section">
                    <h1 class="h2 enterprise-title">Network Management</h1>
                    <p>Network diagnostics and monitoring...</p>
                </div>

                <div id="automation" class="content-section">
                    <h1 class="h2 enterprise-title">Automation Center</h1>
                    <p>Background jobs and workflow automation...</p>
                </div>

                <div id="reports" class="content-section">
                    <h1 class="h2 enterprise-title">Reports & Analytics</h1>
                    <p>Comprehensive reporting and analytics...</p>
                </div>

                <div id="settings" class="content-section">
                    <h1 class="h2 enterprise-title">System Settings</h1>
                    <p>Configuration and system settings...</p>
                </div>
            </main>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/secure-auth.js"></script>
    <script src="js/site.js"></script>
    
    <!-- Service Worker Registration -->
    <script>
        // Register service worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {
                        console.log('Service Worker registered successfully:', registration.scope);
                        
                        // Check for updates
                        registration.addEventListener('updatefound', () => {
                            const newWorker = registration.installing;
                            newWorker.addEventListener('statechange', () => {
                                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                    // New content is available, show update notification
                                    showUpdateNotification();
                                }
                            });
                        });
                    })
                    .catch(error => {
                        console.error('Service Worker registration failed:', error);
                    });
            });
        }
        
        // Show update notification
        function showUpdateNotification() {
            const notification = document.createElement('div');
            notification.className = 'alert alert-info alert-dismissible fade show position-fixed';
            notification.style.cssText = 'top: 20px; right: 20px; z-index: 9999; min-width: 300px;';
            notification.innerHTML = `
                <i class="fas fa-sync-alt me-2"></i>
                <strong>Update Available!</strong> A new version of the app is available.
                <button type="button" class="btn btn-sm btn-primary ms-2" onclick="updateApp()">Update Now</button>
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;
            document.body.appendChild(notification);
        }
        
        // Update app
        function updateApp() {
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.getRegistration().then(registration => {
                    if (registration && registration.waiting) {
                        registration.waiting.postMessage({ action: 'skipWaiting' });
                        window.location.reload();
                    }
                });
            }
        }
        
        // Listen for service worker updates
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.addEventListener('controllerchange', () => {
                window.location.reload();
            });
        }
        
        // PWA Install Prompt
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            
            // Show install button
            const installButton = document.createElement('button');
            installButton.className = 'btn btn-outline-light btn-sm';
            installButton.innerHTML = '<i class="fas fa-download me-1"></i>Install App';
            installButton.onclick = () => {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choiceResult) => {
                    if (choiceResult.outcome === 'accepted') {
                        console.log('User accepted the install prompt');
                    }
                    deferredPrompt = null;
                });
            };
            
            // Add install button to navbar
            const navbar = document.querySelector('.navbar-nav');
            if (navbar) {
                const installItem = document.createElement('div');
                installItem.className = 'nav-item';
                installItem.appendChild(installButton);
                navbar.appendChild(installItem);
            }
        });
        
        // Track PWA install
        window.addEventListener('appinstalled', (evt) => {
            console.log('PWA was installed');
            // Hide install button
            const installButton = document.querySelector('.btn-outline-light');
            if (installButton) {
                installButton.style.display = 'none';
            }
        });
    </script>
</body>
</html>